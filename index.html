<!DOCTYPE html>
<html>
<head>
<script>
// Check if a new cache is available on page load.
window.addEventListener('load', function(e) {

  window.applicationCache.addEventListener('updateready', function(e) {
    if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
      // Browser downloaded a new app cache.
      // Swap it in and reload the page to get the new hotness.
      window.applicationCache.swapCache();
      if (confirm('A new version of this site is available. Load it?')) {
        window.location.reload();
      }
    } else {
      // Manifest didn't changed. Nothing new to server.
    }
  }, false);

}, false);
	
function ifUp(url,onUp,onDown) {
	// make random string
	var RANDOM_DIGITS = 7; // this is sufficient. Don't do more than ~12.
	var pow = Math.pow(10,RANDOM_DIGITS);
	var randStr = String(Math.floor(Math.random()*pow)+pow).substr(1);
	// create and load image
	var img = new Image();
	img.onload = onUp;
	img.onerror = onDown;
	img.src = url+"?"+randStr;
}
 
ifUp("https://www.yuhuage.win/favicon.ico",
	function(){
		// do something
		window.location.href="https://www.yuhuage.win";
	},
	function(){
		// do something else
		window.location.href="https://www.yuhuage.art";
	}
);
</script>
</head>
<body>
</body>
</html>


